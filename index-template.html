<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>tomtom presentations</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vintage Serif Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              serif: ['Lora', 'serif'],
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              earth: {
                50: '#fdfbf7',  /* Paper White */
                100: '#f2ece4', /* Parchment (Bg) */
                200: '#e6dfd1', /* Light Stone */
                300: '#d7cec1', /* Border */
                400: '#b0a69a', /* Muted Text */
                500: '#8c7b75', /* Secondary Text */
                600: '#6d5d53',
                700: '#5d4037', /* Coffee */
                800: '#433422', /* Dark Coffee (Main Text) */
                900: '#2c1810', /* Deep Brown */
              }
            }
          }
        }
      }
    </script>
    <style>
      body {
        background-color: #f2ece4; /* earth-100 */
        color: #433422; /* earth-800 */
      }
      /* Vintage Scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
      }
      ::-webkit-scrollbar-track {
        background: #f2ece4;
      }
      ::-webkit-scrollbar-thumb {
        background: #d7cec1;
        border-radius: 5px;
        border: 2px solid #f2ece4;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #b0a69a;
      }

      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px rgba(67, 52, 34, 0.1), 0 4px 6px -2px rgba(67, 52, 34, 0.05);
        border-color: #b0a69a;
      }
    </style>
  </head>
  <body class="min-h-screen font-sans selection:bg-[#d7cec1] selection:text-[#2c1810]">

    <div class="max-w-5xl mx-auto px-6 py-16">

      <!-- Header -->
      <header class="text-center mb-16">
        <div class="inline-block mb-4">
          <img src="/app_icon.png" alt="tomtom" class="w-16 h-16 rounded-xl shadow-md mx-auto" />
        </div>
        <h1 class="text-4xl md:text-5xl font-serif font-semibold text-earth-900 mb-4 tracking-tight">
          tomtom presentations
        </h1>
        <p class="text-lg text-earth-500 font-serif italic max-w-xl mx-auto">
          A collection of presentations, knowledge, and ideas.
        </p>
      </header>

      <!-- Search -->
      <div class="mb-12 max-w-2xl mx-auto relative group">
        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
          <svg class="h-5 w-5 text-earth-400 group-focus-within:text-earth-600 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8" stroke-width="2"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65" stroke-width="2" stroke-linecap="round"></line>
          </svg>
        </div>
        <input
          type="text"
          id="searchInput"
          placeholder="Search for a deck..."
          class="w-full bg-earth-50 border-2 border-earth-300 text-earth-800 placeholder-earth-400 rounded-lg py-4 pl-12 pr-4 focus:outline-none focus:border-earth-500 focus:bg-white transition-all duration-200 text-lg shadow-sm font-serif"
        >
      </div>

      <!-- Content -->
      <div id="slidesList" class="space-y-12">
        <!-- Categories will be injected here -->
      </div>

      <!-- Empty State -->
      <div id="emptyState" class="hidden text-center py-20 opacity-60">
        <div class="text-4xl mb-4">üçÇ</div>
        <p class="text-xl font-serif text-earth-600">No presentations found.</p>
      </div>

      <!-- Footer -->
      <footer class="mt-20 border-t border-earth-300 pt-8 text-center">
        <p id="stats" class="text-sm font-medium text-earth-400 font-serif"></p>
      </footer>
    </div>

    <!-- Application Logic -->
    <script>
      // ---------------------------------------------------------
      // CONFIGURATION & DATA
      // This will be replaced by the build script
      // ---------------------------------------------------------

      const baseUrl = '';
      const slides = [];

      // ---------------------------------------------------------
      // APP LOGIC
      // ---------------------------------------------------------

      const slidesListEl = document.getElementById('slidesList');
      const searchInputEl = document.getElementById('searchInput');
      const emptyStateEl = document.getElementById('emptyState');
      const statsEl = document.getElementById('stats');

      function formatTitle(name) {
        return name
          .replace(/-/g, ' ')
          .split(' ')
          .map(word => word.charAt(0).toUpperCase() + word.slice(1))
          .join(' ');
      }

      function groupSlides(slides) {
        const grouped = {};
        slides.forEach(slide => {
          const category = slide.category || 'General';
          if (!grouped[category]) grouped[category] = [];
          grouped[category].push(slide);
        });
        return grouped;
      }

      function render(data) {
        // Clear current content
        slidesListEl.innerHTML = '';

        if (data.length === 0) {
          emptyStateEl.classList.remove('hidden');
          statsEl.innerText = '';
          return;
        }

        emptyStateEl.classList.add('hidden');
        const grouped = groupSlides(data);
        const categories = Object.keys(grouped).sort();

        categories.forEach(category => {
          const categorySection = document.createElement('div');
          categorySection.className = 'animate-fade-in';

          // Category Header
          categorySection.innerHTML = `
            <div class="flex items-center gap-4 mb-6">
              <h2 class="text-2xl font-serif font-bold text-earth-800 border-b-2 border-earth-300 pb-1 pr-4">
                ${category}
              </h2>
              <div class="h-px flex-grow bg-earth-300 opacity-50"></div>
              <span class="text-xs font-mono text-earth-500 bg-earth-200 px-2 py-1 rounded">
                ${grouped[category].length}
              </span>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
          `;

          const grid = categorySection.querySelector('.grid');

          grouped[category].forEach(slide => {
            const cleanPath = slide.path.startsWith('/') ? slide.path.slice(1) : slide.path;
            const href = baseUrl ? `${baseUrl}${cleanPath}/` : `${cleanPath}/`;

            const card = document.createElement('a');
            card.href = href;
            card.className = 'card-hover block bg-earth-50 border border-earth-300 rounded-lg p-6 relative overflow-hidden group';

            card.innerHTML = `
              <div class="relative z-10">
                <div class="flex items-start justify-between mb-3">
                  <div class="p-2 bg-earth-200/50 rounded-md text-earth-600 group-hover:text-earth-800 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <rect x="2" y="3" width="20" height="14" rx="2" ry="2" stroke-width="2"></rect>
                      <line x1="8" y1="21" x2="16" y2="21" stroke-width="2" stroke-linecap="round"></line>
                      <line x1="12" y1="17" x2="12" y2="21" stroke-width="2" stroke-linecap="round"></line>
                    </svg>
                  </div>
                  <span class="text-xs font-medium text-earth-400 font-serif italic">Slidev</span>
                </div>

                <h3 class="text-lg font-bold text-earth-900 mb-2 font-serif group-hover:text-earth-700 transition-colors">
                  ${slide.title || formatTitle(slide.name)}
                </h3>

                ${slide.description ? `
                  <p class="text-sm text-earth-600 mb-4 line-clamp-2">
                    ${slide.description}
                  </p>
                ` : ''}

                <code class="text-xs block mb-6 text-earth-500 font-mono truncate bg-earth-100/50 p-1 rounded">
                  /${slide.path}
                </code>

                <div class="flex items-center justify-between text-xs text-earth-400 border-t border-earth-200 pt-4 mt-auto">
                  <div class="flex items-center gap-1">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                    <span>${slide.lastModified || 'Recent'}</span>
                  </div>
                  <span class="text-earth-600 font-medium group-hover:translate-x-1 transition-transform duration-300 flex items-center gap-1">
                    Open
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                  </span>
                </div>
              </div>
            `;
            grid.appendChild(card);
          });

          slidesListEl.appendChild(categorySection);
        });

        statsEl.innerHTML = `${data.length} decks across ${categories.length} ${categories.length === 1 ? 'category' : 'categories'}`;
      }

      // Search Handler
      searchInputEl.addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase();
        const filtered = slides.filter(slide =>
          slide.name.toLowerCase().includes(query) ||
          slide.path.toLowerCase().includes(query) ||
          (slide.title && slide.title.toLowerCase().includes(query)) ||
          (slide.description && slide.description.toLowerCase().includes(query)) ||
          (slide.category && slide.category.toLowerCase().includes(query))
        );
        render(filtered);
      });

      // Initial Render
      render(slides);

    </script>
  </body>
</html>
